version: '3.3'
services:
  pulsar:
    image: apachepulsar/pulsar:2.6.2
    container_name: metro-pulsar
    entrypoint: ["bin/pulsar","standalone"]
    networks:
      - app-network
    ports:
      - "6650:6650"
      - "8080:8080"
    healthcheck:
      test: ["CMD","bin/pulsar-admin","brokers","healthcheck"]
      interval: 30s
      timeout: 10s
      retries: 5
  kafka:
    image: confluentinc/cp-kafka:5.4.3-1-ubi8
    container_name: metro-kafka
    networks:
      - app-network
    ports:
      - "9021:9021"
networks:
  app-network:
    external: false
